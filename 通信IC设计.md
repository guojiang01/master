## 通信IC设计

1. 集成电路的定义：把一定数量的常用电子元器件，如电阻、电容、晶体管等，以及这些元器件之间的连线，通过半导体工艺集成在一起的具有 特定功能的电路。

2. 集成电路分为模拟芯片、数字芯片和数模混合芯片。模拟集成电路主要构成单片包括：放大器、滤波器、反馈电路、基准源电路、开关电容电路等。

3. 逻辑时序是设计出来的，不是仿出来的，更不是凑出来的。

4. 整体编码规则：

   1. 禁止采用以下代码实现同步复位。

      正常情况下，任何一个模块都可以同步复位或异步复位。但一般情况下，在同一时钟域内必须使用单一的全局同步复位电路，或者使用单一的全局异步复位电路。而大多数ASIC设计通常还需要在FPGA上进行验证，而FPGA对同步与异步复位的处理方式是不一致的。为保证代码的通用性，针对ASIC设计项目，均强制使用异步复位方式，因此下述同步复位方式禁止使用

      ```verilog
      always@(posedge clk) begin
          if(syn_rst)
              .........
          else
              ..........
      end
      ```

      

   2. 建议使用同步化异步复位信号，实现电路如下：

      ![异步.png](https://s2.loli.net/2022/03/23/CqsfhHQv5FXxOKc.png)

       上图，ext_asy_rst是来自外部的复位信号，虽然asy_rst_122p88的下降沿与时钟同步，但它还是用作异步复位。原则上每一个时钟源都输出一个异步复位信号，上述电路的Verilog标准程序如下：

      ```verilog
      always@(posedge clk_122p88 or posedge ext_asy_rst)
          if(ext_asy_rst)
              rst_shft[1:0] <= 2'b11;
      	else 
              rst_shft[1:0] <= {rst_shft[1]};
      assign asy_rst_122p88 = rst_shft[1];
      //标准的异步复位语句规则如下：
      always@(posedge clk_122p88 or posedge asy_rst_122p88)
          begin
              if(asy_rst_122p88)
                  ......
              else
                  ......
      end
      ```

   3. 除非第三方IP指定，否则所有的异步复位必须采用统一的有效电平

   4. 使用三段式Moore型状态机电路描述，其中的状态转移组合逻辑代码如下

      ```verilog
      always@(*)
          begin
              next_state = n'bx;
              case{input,curr_state}
                  s0:next_state = ....;
                  s1:next_state = ....;
                  default:next_state = ......;
              endcase
          end
      //next_state的标准实现代码
      always@(posedge clk or posedge asy_rst)
          if(asy_rst)
              curr_state <= P_IDLE;
      	else
              curr_state <= next_state;
      //时序逻辑输出的参考实现代码
      always@(posedge clk or posedge asy_rst)
          if(asy_rst)
              output <= ......;
      	else 
              case(curr_state)
                  s0:out <= ...;
                  s1;out <=...;
                  default:out <= ...;
              endcase
      ```
      
      

   5. 状态机编码使用独热码，即N个向量采用N位编码，每个向量编码中只有一位为1，其余位均为0，有助于综合器最优化状态机
   6. 对代码中的数字加注释或者使用参数
   7. 参数名及宏名必须采用大写
   8. 必须在if...else语句的所有分支中都对变量进行明确的赋值，否则产生锁存
   9. 组合逻辑严禁采用非阻塞赋值
   10. 组合逻辑中不能引入异步复位
   11. 乘法器尽量调用IP核
   12. 所例化RAM的数据延迟地址应两拍输出
   13. 组合逻辑使用pipeline流水线

5. 普通通信协议：UART/SPI/I2C/USB；数字信号处理：FFT/DCT/FIR；高速信号接口：DDR/LVDS/CPRI/RapidIO；信道编解码：BSH/RS/TURBO/LDPC/Viterbi

6. 常见算法模块

| 模块类别   | 模块名称   | 说明                                                         |
| ---------- | ---------- | ------------------------------------------------------------ |
| 滤波器类   | FIR滤波器  | 最常见的信号处理单元，需要熟练应用                           |
| 滤波器类   | HB滤波器   | 在数字中频处理中很常见，是比较有特点的一类滤波器             |
| 滤波器类   | CIC滤波器  | 在数字中频处理中的必用模块                                   |
| 逼近函数类 | CORDIC算法 | 在数字中频处理中的必用模块                                   |
| 逼近函数类 | Sin/Cos    | 最常见的信号处理函数，需要详细了解各种应用场景               |
| 逼近函数类 | Exp/Log    | 在信道编码中常见，需要熟练掌握                               |
| 逼近函数类 | Polar      | 极坐标变换，需要求出角度和模值                               |
| 逼近函数类 | Rotator    | 向量旋转计算，常用于频偏补偿或其他类似运算                   |
| 逼近函数类 | sqrt       | 求平方根，通信中的常见函数                                   |
| 数据变换类 | FFT        | 傅里叶变换，OFDM系统中最核心的模块                           |
| 数据变换类 | DCT        | 图像处理中的核心模块，与FFT类似                              |
| 数据变换类 | FWT        | 快速WALSH变换，是802.11b中CCK解码的关键                      |
| 纠错编码类 | CRC        | 循环冗余校验码，最常见的编码校验方法                         |
| 纠错编码类 | 卷积码     | 卷积码，通过编码冗余达到较好的传输性能                       |
| 纠错编码类 | 交织与打孔 | 避免突发错误以及减少冗余的关键技术，实现相对简单             |
| 纠错编码类 | PN序列     | 伪随机数发生器，实际上与扰码产生的原理是一样的               |
| 存储类     | 同步FIFO   | 用于存储中间结果，连接各个信号处理部件                       |
| 存储类     | 异步FIFO   | 用于存储中间结果，连接各个信号处理部件，两端的时钟不一致，较为常见 |
| 组合模块   | DDS        | 直接数字频率合成技术                                         |
| 组合模块   | DDC/DUC    | 数字上下变频，是中频技术的一个关键，可以认为是部分基本模块的一个小规模组合 |